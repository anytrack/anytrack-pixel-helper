# <> Anytrack Pixel Helper

## Requirements

**Create a Chrome extension that should:**

1. Detect Anytrack snippets and custom event snippets.
2. Display detected warnings and errors.
3. Capture all the events generated by the Anytrack tag and displays a log of them.
4. Detects all most commonly installed third-party pixels and tracking scripts and checks if they were installed by the Anytrack script.
5. Collect extension usage analytics.

**Scripts that could be injected by Anytrack:**

* Facebook pixel
* TikTok pixel
* Google Analytics GA4 tag
* Google Ads (AW-) tag
* Google Universal Analytics (UA-) tag
* Bing
* Taboola
* Outbrain

Other third-party pixels that also need to be detected on the page:

* Tag Manager


## User stories

1. As a User, I want to check if I correctly installed the script into the page so that I could detect missing or corrupted script.
	 1. If no script → Display “No scripts were found on <domain name>” message.
	 2. If no script → Grey out the extension icon.
	 3. If the script is not in the <head/> section → display the following warning message “Script outside the head tag detected. Please place the AnyTrack script as early as possible in the <head>.“
2. As a User, I want to get info about the asset installed on the page.
	 1. Should display an asset id.
	 2. If click ↗️ → go to the dashboard [https://dashboard.anytrack.io/asset/settings?aid=](https://dashboard.anytrack.io/asset/settings?aid=KnyBMUflY9Lj){assetId}.
3. As a User, I want to see which events are being triggered and sent to AnyTrack.
	 1. Should display a log of captured events starting from the most recent.
	 2. A log entry should display the event name (eg. Page View), timestamp, and “View details“ link button.
	 3. Should display captured events count badge on the extension icon.
4. As a User, I want to track all the payloads AnyTrack script is sending.
	 1. On click on a “View details“ link button → expand and display event payload data.
	 2. See the “Access Event Details“ section here [https://support.anytrack.io/knowledge/how-to-trigger-third-party-pixels](https://support.anytrack.io/knowledge/how-to-trigger-third-party-pixels "smart-link") for the list of event data that should be displayed.
	 3. Internal params (not in the table) should not be displayed.
5. As a User, I want to detect event snippets on the page.
	 1. Should find all occurrences of `Anytrack(<param>, \[...\])`.
	 2. Should display a list of occurrences grouped by the first parameter.
6. As a User, I want to get a list of installed pixels by Anytrack.
	 1. Should display pixel list.
	 2. Should display list under “Using AnyTrack“ heading.
7. As a User, I want to get a list of pixels that are installed by adding them directly to the page (not by Anytrack).
	 1. Should display pixel list.
	 2. Should highlight as a possible problem (⚠️ icon).
	 3. Should display list under “Installed directly“ heading.
	 4. If a pixel is configured (in config, pixels array), but the code was installed manually → display the warning message “AnyTrack automatically installs pixels on your website. Please remove <pixel name> pixel code from this page to avoid event duplication.“
8. As an Administrator, I want to get usage statistics of the extension in Google Analytics GA4.
	 1. Should track:
		1. open.
		2. click outside.
	2. GA4 tracking id should be configurable before building the extension.
9. As a Developer, I should be able to extend the functionality by adding new warnings/errors/notices for custom cases.
	1. Should be an easy programming interface (SDK) to add custom messages to the notifications panel.


## References and UI

<> AnyTrack icon can be found here: [https://cdn.anytrack.io/affiliate-networks/icons/anytrack.svg](https://cdn.anytrack.io/affiliate-networks/icons/anytrack.svg)

TikTok helper  
[https://chrome.google.com/webstore/detail/tiktok-pixel-helper/aelgobmabdmlfmiblddjfnjodalhidnn](https://chrome.google.com/webstore/detail/tiktok-pixel-helper/aelgobmabdmlfmiblddjfnjodalhidnn)

Reddit helper  
[https://chrome.google.com/webstore/detail/reddit-pixel-helper/ebgpcjlgganlidigifggjjiglghjnjcj](https://chrome.google.com/webstore/detail/reddit-pixel-helper/ebgpcjlgganlidigifggjjiglghjnjcj)

Meta pixel helper  
[https://chrome.google.com/webstore/detail/meta-pixel-helper/fdgfkebogiimcoedlicjlajpkdmockpc](https://chrome.google.com/webstore/detail/meta-pixel-helper/fdgfkebogiimcoedlicjlajpkdmockpc)


## Tech requirements

The code should be submitted as a PR to the [https://github.com/anytrack/anytrack-pixel-helper](https://github.com/anytrack/anytrack-pixel-helper) repository. The app should be built using the following technologies:

* Typescript + React 18 or Preact 10
* Styling with MaterialUI (^v5)
* Jest or Vitest as a testing framework
* Vite or Webpack 5 as a bundler


## Capture tracking script events (Anytrack SDK)

Get AssetId

```javascript
AnyTrack('aid') // get AssetId
```

Get all configured pixels

```javascript
AnyTrack('config', 'pixels')
```

Subscribe to events

```javascript
AnyTrack(
  'bind',
  'OutboundClick', // standard event name 
  function (e) {
    // code
});
```

```javascript
enum StandardEventName {
    PageView = "PageView",
    OutboundClick = "OutboundClick",
    FormSubmit = "FormSubmit",
    ViewContent = "ViewContent",
    AddToCart = "AddToCart",
    InitiateCheckout = "InitiateCheckout",
    Lead = "Lead",
    CompleteRegistration = "CompleteRegistration",
    Purchase = "Purchase",
    AddPaymentInfo = "AddPaymentInfo"
}
```

see: [https://support.anytrack.io/knowledge/how-to-trigger-third-party-pixels](https://support.anytrack.io/knowledge/how-to-trigger-third-party-pixels "smart-link")

### Testing and debugging

Page with tracking script and demo events:

[https://anytrack.github.io/demo-pages/extension.html](https://anytrack.github.io/demo-pages/extension.html)
